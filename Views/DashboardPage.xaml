<Page x:Class="Hawkbat.Views.DashboardPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:config="clr-namespace:Hawkbat.Config"
      Title="Dashboard">

  <Page.Resources>
    <SolidColorBrush x:Key="AppBackgroundBrush" Color="#000000" />
    <SolidColorBrush x:Key="PanelBackgroundBrush" Color="#0A0A0A" />
    <SolidColorBrush x:Key="TextBrush" Color="#FFFFFF" />
    <SolidColorBrush x:Key="MutedTextBrush" Color="#8A8A97" />
    <SolidColorBrush x:Key="PendingBrush" Color="#3A3A44" />
    <SolidColorBrush x:Key="SuccessBrush" Color="#2E9E56" />
    <SolidColorBrush x:Key="FailureBrush" Color="#D64545" />
    <SolidColorBrush x:Key="WarningBrush" Color="#F2C94C" />
    <SolidColorBrush x:Key="StopBrush" Color="#8B0000" />

    <Style x:Key="PrimaryButton" TargetType="Button">
      <Setter Property="Background" Value="{DynamicResource AccentBrush}" />
      <Setter Property="Foreground" Value="{StaticResource TextBrush}" />
      <Setter Property="BorderThickness" Value="0" />
      <Setter Property="Padding" Value="10,6" />
      <Setter Property="FontWeight" Value="SemiBold" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Border Background="{TemplateBinding Background}" CornerRadius="6">
              <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
            </Border>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </Page.Resources>

  <Grid Background="{StaticResource AppBackgroundBrush}" Margin="12">
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="65*" />
      <ColumnDefinition Width="35*" />
    </Grid.ColumnDefinitions>

    <Border x:Name="ScanOutputBorder" Grid.Column="0" Background="{StaticResource AppBackgroundBrush}" BorderThickness="1" CornerRadius="8" Padding="12" Margin="0,0,12,0">
      <Grid>
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto" />
          <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <TextBlock Text="Scan Output" Foreground="{StaticResource TextBrush}" FontWeight="Bold" Margin="0,0,0,8" />
        <RichTextBox x:Name="ScanLog" Grid.Row="1" IsReadOnly="True" FontFamily="Consolas" Background="{StaticResource AppBackgroundBrush}" BorderThickness="0" Foreground="{StaticResource TextBrush}" VerticalScrollBarVisibility="Auto" />
      </Grid>
    </Border>

    <Border x:Name="RightPanelBorder" Grid.Column="1" Background="{StaticResource PanelBackgroundBrush}" BorderThickness="1" CornerRadius="8" Padding="12">
      <DockPanel LastChildFill="True">
        <!-- Version at bottom -->
        <StackPanel DockPanel.Dock="Bottom" Orientation="Vertical">
          <Button x:Name="AddUnitPacksButton" Content="Add Unit Packs" Foreground="{StaticResource MutedTextBrush}" 
                  Background="Transparent" BorderThickness="0" FontSize="10" Cursor="Hand" 
                  Click="OnAddUnitPacks" Padding="0,4" />
          <TextBlock Text="{x:Static config:AppConfig.CurrentVersion}" Foreground="{StaticResource MutedTextBrush}" FontSize="10" HorizontalAlignment="Center" Margin="0,8,0,0" />
        </StackPanel>

        <StackPanel>
          <Image x:Name="UnitLogo" Source="/Resources/logo.png" MaxHeight="80" HorizontalAlignment="Center" Stretch="Uniform" />
          <Border Height="1" Background="{DynamicResource AccentBrush}" Margin="0,8,0,8" />
          <TextBlock x:Name="UnitNameText" Text="Unit Name" Foreground="{StaticResource TextBrush}" FontWeight="Bold" FontSize="16" HorizontalAlignment="Center" />
          <TextBlock x:Name="UnitSubtitleText" Text="Subtitle" Foreground="{DynamicResource AccentBrush}" FontSize="12" HorizontalAlignment="Center" Margin="0,2,0,0" />
          <Border Height="1" Background="{DynamicResource AccentBrush}" Margin="0,8,0,8" />

          <Button x:Name="StartScanButton" Content="Start Scan" Style="{StaticResource PrimaryButton}" Click="OnStartScan" />

          <Border Height="1" Background="{DynamicResource AccentBrush}" Margin="0,8,0,8" />
          <TextBlock Text="Scan Results" Foreground="{StaticResource TextBrush}" FontSize="11" FontWeight="Bold" Margin="0,0,0,6" />

          <StackPanel x:Name="ScanResultsPanel">
            <!-- Scan result items dynamically generated in code-behind -->
          </StackPanel>

          <Border Margin="0,10,0,0" Background="#1D1D27" CornerRadius="6" Height="18">
            <ProgressBar x:Name="ScanProgress" Minimum="0" Maximum="100" Value="0" Foreground="{DynamicResource AccentBrush}" Background="Transparent" BorderThickness="0" />
          </Border>

          <Border Height="1" Background="{DynamicResource AccentBrush}" Margin="0,10,0,0" />
        </StackPanel>
      </DockPanel>
    </Border>
  </Grid>
</Page>
